{% extends "layouts/base.html" %}
{% import "macros/alerts.html" as alerts %}
{% from "macros/pagination.html" import pagination as pg with context %}

{% block content %}

  <div class="container-fluid" style="max-width: 650px;padding-right: 14px;padding-left: 14px;">
      <div class="row mb-2">
          <div class="col-xl-12 mb-2">
            <div class="input-group">
              <input class="form-control" type="text" placeholder="Search for...">
                <button class="btn btn-primary py-0" type="button"><i class="fas fa-search"></i></button>
            </div>
          </div>
      </div>
      <div class="row mb-3">
          <div class="col">
              <div class="card shadow mb-3">
                  <div class="card-header py-3">
                    <div class="d-flex justify-content-between">
                      <div class="text-end d-inline-flex" aria-controls="">
                        <span class="text-primary m-0 fw-bold">Contacts</span>
                      </div>
                        <div class="text-end d-inline-flex" aria-controls="">
                          <a class="btn btn-primary btn-sm" role="button" href="{{url_for('auth.new_contact')}}">New contact</a>
                        </div>
                    </div>
                  </div>
                  <div class="card-body">
                    {# can be used later for additional controls
                    <div class="d-flex justify-content-between mmb-2" aria-controls="">
                      <div class="text-end d-inline-flex" aria-controls="">
                      </div>
                        <div class="text-end d-inline-flex" aria-controls="">
                        </div>
                    </div>
                    #}

                {% for contact in instances %}
                      <div class="card shadow border-left-primary py-2 mb-2">
                          <div class="card-body d-flex flex-column">
                              <div class="d-flex align-items-center">
                                <div class="me-auto">
                                  {# <span class="badge bg-primary position-relative">Orders<span class="bg-danger position-absolute top-0 start-100 translate-middle badge rounded-pill">6</span></span> #}
                                  <a href="#"><span class="badge rounded-pill text-white text-bg-info">Orders {{contact.order_count}}</span></a>
                                </div>
                                  <div>
                                    <p class="fw-bold text-danger h5 mb-0">{{ contact.first_name ~ ' ' ~ contact.last_name }}</p>
                                  </div>
                              </div>
                              <div>
                                  <hr class="my-1">
                              </div>
                              <div class="d-flex align-items-center">
                                  <div class="text-end me-auto"><i class="fas fa-user fa-2x text-gray-300"></i></div>
                                  <div>
                                    <p class="text-end text-primary mb-0">{{contact.street ~ ' ' ~ contact.city}}</p>
                                    <p class="text-end text-primary mb-1">{{contact.mobile_phone | phone_format}}</p>
                                  </div>
                              </div>
                              <div>
                                  <hr class="my-1">
                              </div>
                              <div>
                                  <div class="d-flex mb-1"><a class="btn btn-success btn-sm mx-1" role="button" href="order_form.html">New order</a><a class="btn btn-info btn-sm" role="button" href="order_table.html">Orders</a></div>
                              </div>
                              <div></div>
                          </div>
                      </div>
                  {% endfor %}
                      <div class="d-flex justify-content-between mmb-2" aria-controls="">
                        <div class="text-end d-inline-flex" aria-controls="">
                          {{ pg('auth.contacts') }}
                        </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

{% endblock %}
